state("overlay", "USAPolish")
{
	float load : 0x003DE8A8, 0x8, 0x9D4, 0x5C;
	uint level : 0x003DE8A8, 0x8, 0x9C4, 0x7C;
	uint activeMissions : 0x003DE8A8, 0x8, 0xAF4, 0x20;
	float xPos : 0x003DCAA0;
	bool paused : 0x003DE8B4, 0x4;
	byte menuState : 0x003CAF54, 0x12D8;
	uint dialogType : 0x003CAF54, 0x12DC;
	uint playerState : 0x003C7C28, 0x0, 0x94, 0x598;
}

state("overlay_win2k", "USAPolish")
{
	float load : 0x003DD8A8, 0x8, 0x9D4, 0x5C;
	uint level : 0x003DD8A8, 0x8, 0x9C4, 0x7C;
	uint activeMissions : 0x003DD8A8, 0x8, 0xAF4, 0x20;
	float xPos : 0x003DBAA0;
	bool paused : 0x003DD8B4, 0x4;
	byte menuState : 0x003C9F54, 0x12D8;
	uint dialogType : 0x003C9F54, 0x12DC;
	uint playerState : 0x003C6C28, 0x0, 0x94, 0x598;
}

state("overlay", "Scandinavia")
{
	float load : 0x003E2D50, 0x8, 0x9D4, 0x5C;
	uint level : 0x003E2D50, 0x8, 0x9C4, 0x7C;
	uint activeMissions : 0x003E2D50, 0x8, 0xAF4, 0x20;
	float xPos : 0x003E0C40;
	bool paused : 0x003E2D5C, 0x4;
	byte menuState : 0x003CF0F4, 0x12D8;
	uint dialogType : 0x003CF0F4, 0x12DC;
	uint playerState : 0x003CBDC8, 0x0, 0x94, 0x598;
}

state("overlay_win2k", "Scandinavia")
{
	float load : 0x003E2D50, 0x8, 0x9D4, 0x5C;
	uint level : 0x003E2D50, 0x8, 0x9C4, 0x7C;
	uint activeMissions : 0x003E2D50, 0x8, 0xAF4, 0x20;
	float xPos : 0x003E0C40;
	bool paused : 0x003E2D5C, 0x4;
	byte menuState : 0x003CF0F4, 0x12D8;
	uint dialogType : 0x003CF0F4, 0x12DC;
	uint playerState : 0x003CBDC8, 0x0, 0x94, 0x598;
}

state("overlay", "Brazilian")
{
	float load : 0x003DFD28, 0x8, 0x9D4, 0x5C;
	uint level : 0x003DFD28, 0x8, 0x9C4, 0x7C;
	uint activeMissions : 0x003DFD28, 0x8, 0xAF4, 0x20;
	float xPos : 0x003DDC60;
	bool paused : 0x003DFD34, 0x4;
	byte menuState : 0x003CC114, 0x12D8;
	uint dialogType : 0x003CC114, 0x12DC;
	uint playerState : 0x003C8DE8, 0x0, 0x94, 0x598;
}

state("overlay_win2k", "Brazilian")
{
	float load : 0x003DED08, 0x8, 0x9D4, 0x5C;
	uint level : 0x003DED08, 0x8, 0x9C4, 0x7C;
	uint activeMissions : 0x003DED08, 0x8, 0xAF4, 0x20;
	float xPos : 0x003DCC40;
	bool paused : 0x003DED14, 0x4;
	byte menuState : 0x003CB0F4, 0x12D8;
	uint dialogType : 0x003CB0F4, 0x12DC;
	uint playerState : 0x003C7DC8, 0x0, 0x94, 0x598;
}

state("overlay", "DutchFrenchGermanPortugueseSpanish")
{
	float load : 0x003E2D08, 0x8, 0x9D4, 0x5C;
	uint level : 0x003E2D08, 0x8, 0x9C4, 0x7C;
	uint activeMissions : 0x003E2D08, 0x8, 0xAF4, 0x20;
	float xPos : 0x003E0C40;
	bool paused : 0x003E2D14, 0x4;
	byte menuState : 0x003CF0F4, 0x12D8;
	uint dialogType : 0x003CF0F4, 0x12DC;
	uint playerState : 0x003CBDC8, 0x0, 0x94, 0x598;
}

state("overlay_win2k", "DutchFrenchGermanPortugueseSpanish")
{
	float load : 0x003E2D08, 0x8, 0x9D4, 0x5C;
	uint level : 0x003E2D08, 0x8, 0x9C4, 0x7C;
	uint activeMissions : 0x003E2D08, 0x8, 0xAF4, 0x20;
	float xPos : 0x003E0C40;
	bool paused : 0x003E2D14, 0x4;
	byte menuState : 0x003CF0F4, 0x12D8;
	uint dialogType : 0x003CF0F4, 0x12DC;
	uint playerState : 0x003CBDC8, 0x0, 0x94, 0x598;
}

state("overlay", "ActionPack")
{
	float load : 0x003DF8A8, 0x8, 0x9D4, 0x5C;
	uint level : 0x003DF8A8, 0x8, 0x9C4, 0x7C;
	uint activeMissions : 0x003DF8A8, 0x8, 0xAF4, 0x20;
	float xPos : 0x003DDAA0;
	bool paused : 0x003DF8B4, 0x4;
	byte menuState : 0x003CBF54, 0x12D8;
	uint dialogType : 0x003CBF54, 0x12DC;
	uint playerState : 0x003C8C28, 0x0, 0x94, 0x598;
}

state("overlay_win2k", "ActionPack")
{
	float load : 0x003DE8A8, 0x8, 0x9D4, 0x5C;
	uint level : 0x003DE8A8, 0x8, 0x9C4, 0x7C;
	uint activeMissions : 0x003DE8A8, 0x8, 0xAF4, 0x20;
	float xPos : 0x003DCAA0;
	bool paused : 0x003DE8B4, 0x4;
	byte menuState : 0x003CAF54, 0x12D8;
	uint dialogType : 0x003CAF54, 0x12DC;
	uint playerState : 0x003C7C28, 0x0, 0x94, 0x598;
}

startup
{
	// Auto-start
	settings.Add("auto_start", false, "Auto-Start");
	settings.Add("start_mb", false, "Somewhere in France", "auto_start");
	settings.SetToolTip("start_mb", "Starts the timer automatically in the first frame of movement.");
	settings.Add("start_pipemk", false, "The slide of your life", "auto_start");
	settings.SetToolTip("start_pipemk", "Starts the timer automatically when entering the slide of your life from the extras menu.");
	
	// Auto-split
	settings.Add("auto_split", false, "Auto-Split");
	settings.Add("split_any", false, "Levels and missions", "auto_split");
	settings.SetToolTip("split_any", "Splits on level changes and completed missions.");
	settings.Add("split_anyCollection", false, "Collection", "split_any");
	settings.SetToolTip("split_anyCollection", "Splits after a collectible collection is completed.");
	settings.Add("split_deaths", false, "Deaths", "auto_split");
	settings.SetToolTip("split_deaths", "Splits when dying.");
    
	// Auto-end
	settings.Add("auto_end", false, "Auto-Stop");
	settings.Add("end_knchase", false, "Last Skinner chase", "auto_end");
	settings.SetToolTip("end_knchase", "Splits at the end of the final chase.");
	settings.Add("end_amc", false, "All Main Collectibles", "auto_end");
	settings.SetToolTip("end_amc", "Splits after collecting the last collectible in the sewer.");
}

init
{
	const String headerUS = "32-4B-40-97-76-2A-2E-C4-76-2A-2E-C4-76-2A-2E-C4-E1-EE-50-C4-72-2A-2E-C4-51-EC-53-C4-41-2A-2E-C4-51-EC-43-C4-C7-2A-2E-C4-73-26-73-C4-74-2A-2E-C4-AC-09-32-C4-77-2A-2E-C4-B5-25-71-C4-75-2A-2E-C4-B5-25-4E-C4-74-2A-2E-C4-B5-25-73-C4-7E-2A-2E-C4-51-EC-55-C4-6F-2A-2E-C4-76-2A-2F-C4-86-2A-2E-C4-51-EC-40-C4-CB-28-2E-C4-51-EC-54-C4-77-2A-2E-C4-51-EC-52-C4-77-2A-2E-C4-76-2A-2E-C4-73-2A-2E-C4-51-EC-56-C4-77-2A-2E-C4-52-69-63-68-76-2A-2E-C4-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-50-45-00-00-4C-01-05-00-02-80-4D-46-00-00-00-00-00-00-00-00-E0-00-02-01-0B-01-08-00-00-70-30-00-00-A0-11-00-00-00-00-00-DC-81-2B-00-00-10-00-00-00-80-30-00-00-00-40-00-00-10-00-00-00-10-00-00-04-00-00-00-00-00-00-00-04-00-00-00-00-00-00-00-00-E0-45-00-00-10-00-00-71-50-42-00-02-00-00-00-00-00-10-00-00-10-00-00-00-00-10-00-00-10-00-00-00-00-00-00-10-00-00-00-90-7C-3B-00-4F-02-00-00-2C-65-3B-00-7C-01-00-00-00-20-40-00-70-4C-02-00-00-00-00-00-00-00-00-00-00-20-42-00-20-16-00-00-00-70-42-00-FC-55-03-00-A0-A4-30-00-1C-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-80-30-00-0C-04-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-2E-74-65-78-74-00-00-00-1A-61-30-00-00-10-00-00-00-70-30-00-00-10-00-00-00-00-00-00-00-00-00-00-00-00-00-00-20-00-00-60-2E-72-64-61-74-61-00-00-DF-FE-0A-00-00-80-30-00-00-00-0B-00-00-80-30-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-40-2E-64-61-74-61-00-00-00-48-9D-04-00-00-80-3B-00-00-E0-00-00-00-80-3B-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-C0-2E-72-73-72-63-00-00-00-70-4C-02-00-00-20-40-00-00-50-02-00-00-60-3C-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-40-2E-72-65-6C-6F-63-00-00-C8-61-03-00-00-70-42-00-00-70-03-00-00-B0-3E-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-42-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00";
	const String headerUSwin2k = "71-39-0C-AD-35-58-62-FE-35-58-62-FE-35-58-62-FE-A2-9C-1C-FE-31-58-62-FE-12-9E-1F-FE-02-58-62-FE-12-9E-0F-FE-84-58-62-FE-30-54-3F-FE-37-58-62-FE-EF-7B-7E-FE-34-58-62-FE-F6-57-3D-FE-36-58-62-FE-F6-57-3F-FE-33-58-62-FE-F6-57-02-FE-37-58-62-FE-12-9E-19-FE-2C-58-62-FE-35-58-63-FE-DA-58-62-FE-12-9E-0C-FE-88-5A-62-FE-12-9E-18-FE-34-58-62-FE-12-9E-1E-FE-34-58-62-FE-35-58-62-FE-30-58-62-FE-12-9E-1A-FE-34-58-62-FE-52-69-63-68-35-58-62-FE-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-50-45-00-00-4C-01-05-00-35-82-4D-46-00-00-00-00-00-00-00-00-E0-00-02-01-0B-01-08-00-00-60-30-00-00-A0-11-00-00-00-00-00-AC-79-2B-00-00-10-00-00-00-70-30-00-00-00-40-00-00-10-00-00-00-10-00-00-04-00-00-00-00-00-00-00-04-00-00-00-00-00-00-00-00-D0-45-00-00-10-00-00-50-A8-42-00-02-00-00-00-00-00-10-00-00-10-00-00-00-00-10-00-00-10-00-00-00-00-00-00-10-00-00-00-20-6C-3B-00-55-02-00-00-E4-54-3B-00-68-01-00-00-00-10-40-00-70-4C-02-00-00-00-00-00-00-00-00-00-00-10-42-00-20-16-00-00-00-60-42-00-6C-55-03-00-90-94-30-00-1C-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-70-30-00-04-04-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-2E-74-65-78-74-00-00-00-0A-59-30-00-00-10-00-00-00-60-30-00-00-10-00-00-00-00-00-00-00-00-00-00-00-00-00-00-20-00-00-60-2E-72-64-61-74-61-00-00-75-FE-0A-00-00-70-30-00-00-00-0B-00-00-70-30-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-40-2E-64-61-74-61-00-00-00-48-9D-04-00-00-70-3B-00-00-E0-00-00-00-70-3B-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-C0-2E-72-73-72-63-00-00-00-70-4C-02-00-00-10-40-00-00-50-02-00-00-50-3C-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-40-2E-72-65-6C-6F-63-00-00-26-61-03-00-00-60-42-00-00-70-03-00-00-A0-3E-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-42-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00";
	const String headerPL = "32-4B-40-97-76-2A-2E-C4-76-2A-2E-C4-76-2A-2E-C4-E1-EE-50-C4-72-2A-2E-C4-51-EC-53-C4-41-2A-2E-C4-51-EC-43-C4-C7-2A-2E-C4-73-26-73-C4-74-2A-2E-C4-AC-09-32-C4-77-2A-2E-C4-B5-25-71-C4-75-2A-2E-C4-B5-25-4E-C4-74-2A-2E-C4-B5-25-73-C4-7E-2A-2E-C4-51-EC-55-C4-6F-2A-2E-C4-76-2A-2F-C4-86-2A-2E-C4-51-EC-40-C4-CB-28-2E-C4-51-EC-54-C4-77-2A-2E-C4-51-EC-52-C4-77-2A-2E-C4-76-2A-2E-C4-73-2A-2E-C4-51-EC-56-C4-77-2A-2E-C4-52-69-63-68-76-2A-2E-C4-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-50-45-00-00-4C-01-06-00-02-80-4D-46-00-00-00-00-00-00-00-00-E0-00-02-01-0B-01-08-00-00-70-30-00-00-A0-11-00-00-00-00-00-DC-81-2B-00-00-10-00-00-00-80-30-00-00-00-40-00-00-10-00-00-00-10-00-00-04-00-00-00-00-00-00-00-04-00-00-00-00-00-00-00-00-F0-45-00-00-10-00-00-71-50-42-00-02-00-00-00-00-00-10-00-00-10-00-00-00-00-10-00-00-10-00-00-00-00-00-00-10-00-00-00-90-7C-3B-00-4F-02-00-00-2C-65-3B-00-7C-01-00-00-00-20-40-00-70-4C-02-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-70-42-00-FC-55-03-00-A0-A4-30-00-1C-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-80-30-00-0C-04-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-2E-74-65-78-74-00-00-00-00-70-30-00-00-10-00-00-00-70-30-00-00-10-00-00-00-00-00-00-00-00-00-00-00-00-00-00-20-00-00-60-2E-72-64-61-74-61-00-00-00-00-0B-00-00-80-30-00-00-00-0B-00-00-80-30-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-40-2E-64-61-74-61-00-00-00-00-A0-04-00-00-80-3B-00-00-E0-00-00-00-80-3B-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-C0-2E-72-73-72-63-00-00-00-00-50-02-00-00-20-40-00-00-50-02-00-00-60-3C-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-40-2E-72-65-6C-6F-63-00-00-00-70-03-00-00-70-42-00-00-70-03-00-00-B0-3E-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-42-2E-78-64-61-74-61-00-00-00-10-00-00-00-E0-45-00-00-10-00-00-00-20-42-00-00-00-00-00-00-00-00-00-00-00-00-00-60-00-00-E0-00-00-00-00-00-00-00-00";
	const String headerPLwin2k = "71-39-0C-AD-35-58-62-FE-35-58-62-FE-35-58-62-FE-A2-9C-1C-FE-31-58-62-FE-12-9E-1F-FE-02-58-62-FE-12-9E-0F-FE-84-58-62-FE-30-54-3F-FE-37-58-62-FE-EF-7B-7E-FE-34-58-62-FE-F6-57-3D-FE-36-58-62-FE-F6-57-3F-FE-33-58-62-FE-F6-57-02-FE-37-58-62-FE-12-9E-19-FE-2C-58-62-FE-35-58-63-FE-DA-58-62-FE-12-9E-0C-FE-88-5A-62-FE-12-9E-18-FE-34-58-62-FE-12-9E-1E-FE-34-58-62-FE-35-58-62-FE-30-58-62-FE-12-9E-1A-FE-34-58-62-FE-52-69-63-68-35-58-62-FE-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-50-45-00-00-4C-01-06-00-35-82-4D-46-00-00-00-00-00-00-00-00-E0-00-02-01-0B-01-08-00-00-60-30-00-00-A0-11-00-00-00-00-00-AC-79-2B-00-00-10-00-00-00-70-30-00-00-00-40-00-00-10-00-00-00-10-00-00-04-00-00-00-00-00-00-00-04-00-00-00-00-00-00-00-00-E0-45-00-00-10-00-00-50-A8-42-00-02-00-00-00-00-00-10-00-00-10-00-00-00-00-10-00-00-10-00-00-00-00-00-00-10-00-00-00-20-6C-3B-00-55-02-00-00-E4-54-3B-00-68-01-00-00-00-10-40-00-70-4C-02-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-60-42-00-6C-55-03-00-90-94-30-00-1C-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-70-30-00-04-04-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-2E-74-65-78-74-00-00-00-00-60-30-00-00-10-00-00-00-60-30-00-00-10-00-00-00-00-00-00-00-00-00-00-00-00-00-00-20-00-00-60-2E-72-64-61-74-61-00-00-00-00-0B-00-00-70-30-00-00-00-0B-00-00-70-30-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-40-2E-64-61-74-61-00-00-00-00-A0-04-00-00-70-3B-00-00-E0-00-00-00-70-3B-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-C0-2E-72-73-72-63-00-00-00-00-50-02-00-00-10-40-00-00-50-02-00-00-50-3C-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-40-2E-72-65-6C-6F-63-00-00-00-70-03-00-00-60-42-00-00-70-03-00-00-A0-3E-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-42-2E-78-64-61-74-61-00-00-00-10-00-00-00-D0-45-00-00-10-00-00-00-10-42-00-00-00-00-00-00-00-00-00-00-00-00-00-60-00-00-E0";
	const String headerSC = "41-45-5A-78-05-24-34-2B-05-24-34-2B-05-24-34-2B-92-E0-4A-2B-01-24-34-2B-22-E2-49-2B-32-24-34-2B-22-E2-59-2B-B4-24-34-2B-00-28-69-2B-07-24-34-2B-DF-07-28-2B-04-24-34-2B-22-E2-4F-2B-07-24-34-2B-C6-2B-6B-2B-06-24-34-2B-C6-2B-54-2B-07-24-34-2B-C6-2B-69-2B-1A-24-34-2B-05-24-35-2B-F5-24-34-2B-22-E2-5A-2B-B9-26-34-2B-22-E2-4E-2B-04-24-34-2B-22-E2-48-2B-04-24-34-2B-05-24-34-2B-00-24-34-2B-22-E2-4C-2B-04-24-34-2B-52-69-63-68-05-24-34-2B-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-50-45-00-00-4C-01-05-00-79-87-82-46-00-00-00-00-00-00-00-00-E0-00-02-01-0B-01-08-00-00-90-30-00-00-C0-11-00-00-00-00-00-FC-AE-2B-00-00-10-00-00-00-A0-30-00-00-00-40-00-00-10-00-00-00-10-00-00-04-00-00-00-00-00-00-00-04-00-00-00-00-00-00-00-00-30-46-00-00-10-00-00-77-B5-42-00-02-00-00-00-00-00-10-00-00-10-00-00-00-00-10-00-00-10-00-00-00-00-00-00-10-00-00-00-D0-AE-3B-00-4F-02-00-00-64-97-3B-00-7C-01-00-00-00-70-40-00-F8-47-02-00-00-00-00-00-00-00-00-00-00-60-42-00-20-15-00-00-00-C0-42-00-EC-57-03-00-A0-C4-30-00-1C-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-A0-30-00-0C-04-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-2E-74-65-78-74-00-00-00-AA-8A-30-00-00-10-00-00-00-90-30-00-00-10-00-00-00-00-00-00-00-00-00-00-00-00-00-00-20-00-00-60-2E-72-64-61-74-61-00-00-1F-11-0B-00-00-A0-30-00-00-20-0B-00-00-A0-30-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-40-2E-64-61-74-61-00-00-00-E8-A1-04-00-00-C0-3B-00-00-E0-00-00-00-C0-3B-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-C0-2E-72-73-72-63-00-00-00-F8-47-02-00-00-70-40-00-00-50-02-00-00-A0-3C-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-40-2E-72-65-6C-6F-63-00-00-E0-63-03-00-00-C0-42-00-00-70-03-00-00-F0-3E-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-42-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00";
	const String headerSCwin2k = "5F-5F-7F-D8-1B-3E-11-8B-1B-3E-11-8B-1B-3E-11-8B-8C-FA-6F-8B-1F-3E-11-8B-3C-F8-6C-8B-2C-3E-11-8B-3C-F8-7C-8B-AA-3E-11-8B-1E-32-4C-8B-19-3E-11-8B-C1-1D-0D-8B-1A-3E-11-8B-3C-F8-6A-8B-19-3E-11-8B-D8-31-4E-8B-18-3E-11-8B-D8-31-71-8B-19-3E-11-8B-D8-31-4C-8B-06-3E-11-8B-1B-3E-10-8B-F4-3E-11-8B-3C-F8-7F-8B-A7-3C-11-8B-3C-F8-6B-8B-1A-3E-11-8B-3C-F8-6D-8B-1A-3E-11-8B-1B-3E-11-8B-1E-3E-11-8B-3C-F8-69-8B-1A-3E-11-8B-52-69-63-68-1B-3E-11-8B-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-50-45-00-00-4C-01-05-00-EA-86-82-46-00-00-00-00-00-00-00-00-E0-00-02-01-0B-01-08-00-00-90-30-00-00-C0-11-00-00-00-00-00-CC-A6-2B-00-00-10-00-00-00-A0-30-00-00-00-40-00-00-10-00-00-00-10-00-00-04-00-00-00-00-00-00-00-04-00-00-00-00-00-00-00-00-30-46-00-00-10-00-00-85-B6-42-00-02-00-00-00-00-00-10-00-00-10-00-00-00-00-10-00-00-10-00-00-00-00-00-00-10-00-00-00-50-AE-3B-00-55-02-00-00-0C-97-3B-00-68-01-00-00-00-70-40-00-F8-47-02-00-00-00-00-00-00-00-00-00-00-60-42-00-20-15-00-00-00-C0-42-00-58-57-03-00-90-C4-30-00-1C-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-A0-30-00-04-04-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-2E-74-65-78-74-00-00-00-6A-82-30-00-00-10-00-00-00-90-30-00-00-10-00-00-00-00-00-00-00-00-00-00-00-00-00-00-20-00-00-60-2E-72-64-61-74-61-00-00-A5-10-0B-00-00-A0-30-00-00-20-0B-00-00-A0-30-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-40-2E-64-61-74-61-00-00-00-E8-A1-04-00-00-C0-3B-00-00-E0-00-00-00-C0-3B-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-C0-2E-72-73-72-63-00-00-00-F8-47-02-00-00-70-40-00-00-50-02-00-00-A0-3C-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-40-2E-72-65-6C-6F-63-00-00-48-63-03-00-00-C0-42-00-00-70-03-00-00-F0-3E-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-42-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00";
	const String headerBR = "32-4B-40-97-76-2A-2E-C4-76-2A-2E-C4-76-2A-2E-C4-E1-EE-50-C4-72-2A-2E-C4-51-EC-53-C4-41-2A-2E-C4-51-EC-43-C4-C7-2A-2E-C4-73-26-73-C4-74-2A-2E-C4-AC-09-32-C4-77-2A-2E-C4-B5-25-71-C4-75-2A-2E-C4-B5-25-4E-C4-74-2A-2E-C4-B5-25-73-C4-7E-2A-2E-C4-51-EC-55-C4-6F-2A-2E-C4-76-2A-2F-C4-86-2A-2E-C4-51-EC-40-C4-CB-28-2E-C4-51-EC-54-C4-77-2A-2E-C4-51-EC-52-C4-77-2A-2E-C4-76-2A-2E-C4-73-2A-2E-C4-51-EC-56-C4-77-2A-2E-C4-52-69-63-68-76-2A-2E-C4-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-50-45-00-00-4C-01-05-00-5A-1E-69-46-00-00-00-00-00-00-00-00-E0-00-02-01-0B-01-08-00-00-70-30-00-00-B0-11-00-00-00-00-00-0C-88-2B-00-00-10-00-00-00-80-30-00-00-00-40-00-00-10-00-00-00-10-00-00-04-00-00-00-00-00-00-00-04-00-00-00-00-00-00-00-00-00-46-00-00-10-00-00-B8-6B-42-00-02-00-00-00-00-00-10-00-00-10-00-00-00-00-10-00-00-10-00-00-00-00-00-00-10-00-00-00-00-8A-3B-00-4F-02-00-00-9C-72-3B-00-7C-01-00-00-00-40-40-00-60-4E-02-00-00-00-00-00-00-00-00-00-00-30-42-00-20-16-00-00-00-90-42-00-7C-57-03-00-A0-A4-30-00-1C-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-80-30-00-0C-04-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-2E-74-65-78-74-00-00-00-4A-67-30-00-00-10-00-00-00-70-30-00-00-10-00-00-00-00-00-00-00-00-00-00-00-00-00-00-20-00-00-60-2E-72-64-61-74-61-00-00-4F-0C-0B-00-00-80-30-00-00-10-0B-00-00-80-30-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-40-2E-64-61-74-61-00-00-00-C8-A1-04-00-00-90-3B-00-00-E0-00-00-00-90-3B-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-C0-2E-72-73-72-63-00-00-00-60-4E-02-00-00-40-40-00-00-50-02-00-00-70-3C-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-40-2E-72-65-6C-6F-63-00-00-64-63-03-00-00-90-42-00-00-70-03-00-00-C0-3E-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-42-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00";
	const String headerBRwin2k = "71-39-0C-AD-35-58-62-FE-35-58-62-FE-35-58-62-FE-A2-9C-1C-FE-31-58-62-FE-12-9E-1F-FE-02-58-62-FE-12-9E-0F-FE-84-58-62-FE-30-54-3F-FE-37-58-62-FE-EF-7B-7E-FE-34-58-62-FE-F6-57-3D-FE-36-58-62-FE-F6-57-3F-FE-33-58-62-FE-F6-57-02-FE-37-58-62-FE-12-9E-19-FE-2C-58-62-FE-35-58-63-FE-DA-58-62-FE-12-9E-0C-FE-88-5A-62-FE-12-9E-18-FE-34-58-62-FE-12-9E-1E-FE-34-58-62-FE-35-58-62-FE-30-58-62-FE-12-9E-1A-FE-34-58-62-FE-52-69-63-68-35-58-62-FE-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-50-45-00-00-4C-01-05-00-5D-20-69-46-00-00-00-00-00-00-00-00-E0-00-02-01-0B-01-08-00-00-60-30-00-00-B0-11-00-00-00-00-00-DC-7F-2B-00-00-10-00-00-00-70-30-00-00-00-40-00-00-10-00-00-00-10-00-00-04-00-00-00-00-00-00-00-04-00-00-00-00-00-00-00-00-F0-45-00-00-10-00-00-5E-AD-42-00-02-00-00-00-00-00-10-00-00-10-00-00-00-00-10-00-00-10-00-00-00-00-00-00-10-00-00-00-90-79-3B-00-55-02-00-00-54-62-3B-00-68-01-00-00-00-30-40-00-60-4E-02-00-00-00-00-00-00-00-00-00-00-20-42-00-20-16-00-00-00-80-42-00-E4-56-03-00-90-94-30-00-1C-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-70-30-00-04-04-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-2E-74-65-78-74-00-00-00-3A-5F-30-00-00-10-00-00-00-60-30-00-00-10-00-00-00-00-00-00-00-00-00-00-00-00-00-00-20-00-00-60-2E-72-64-61-74-61-00-00-E5-0B-0B-00-00-70-30-00-00-10-0B-00-00-70-30-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-40-2E-64-61-74-61-00-00-00-A8-A1-04-00-00-80-3B-00-00-E0-00-00-00-80-3B-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-C0-2E-72-73-72-63-00-00-00-60-4E-02-00-00-30-40-00-00-50-02-00-00-60-3C-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-40-2E-72-65-6C-6F-63-00-00-C2-62-03-00-00-80-42-00-00-70-03-00-00-B0-3E-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-42-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00";
	const String headerGEPTSP = "41-45-5A-78-05-24-34-2B-05-24-34-2B-05-24-34-2B-92-E0-4A-2B-01-24-34-2B-22-E2-49-2B-32-24-34-2B-22-E2-59-2B-B4-24-34-2B-00-28-69-2B-07-24-34-2B-DF-07-28-2B-04-24-34-2B-22-E2-4F-2B-07-24-34-2B-C6-2B-6B-2B-06-24-34-2B-C6-2B-54-2B-07-24-34-2B-C6-2B-69-2B-1A-24-34-2B-05-24-35-2B-F5-24-34-2B-22-E2-5A-2B-B9-26-34-2B-22-E2-4E-2B-04-24-34-2B-22-E2-48-2B-04-24-34-2B-05-24-34-2B-00-24-34-2B-22-E2-4C-2B-04-24-34-2B-52-69-63-68-05-24-34-2B-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-50-45-00-00-4C-01-05-00-80-EE-78-46-00-00-00-00-00-00-00-00-E0-00-02-01-0B-01-08-00-00-90-30-00-00-C0-11-00-00-00-00-00-BC-AE-2B-00-00-10-00-00-00-A0-30-00-00-00-40-00-00-10-00-00-00-10-00-00-04-00-00-00-00-00-00-00-04-00-00-00-00-00-00-00-00-30-46-00-00-10-00-00-8A-7A-42-00-02-00-00-00-00-00-10-00-00-10-00-00-00-00-10-00-00-10-00-00-00-00-00-00-10-00-00-00-B0-AE-3B-00-4F-02-00-00-44-97-3B-00-7C-01-00-00-00-70-40-00-84-47-02-00-00-00-00-00-00-00-00-00-00-60-42-00-20-15-00-00-00-C0-42-00-B0-57-03-00-A0-C4-30-00-1C-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-A0-30-00-0C-04-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-2E-74-65-78-74-00-00-00-6A-8A-30-00-00-10-00-00-00-90-30-00-00-10-00-00-00-00-00-00-00-00-00-00-00-00-00-00-20-00-00-60-2E-72-64-61-74-61-00-00-FF-10-0B-00-00-A0-30-00-00-20-0B-00-00-A0-30-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-40-2E-64-61-74-61-00-00-00-A8-A1-04-00-00-C0-3B-00-00-E0-00-00-00-C0-3B-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-C0-2E-72-73-72-63-00-00-00-84-47-02-00-00-70-40-00-00-50-02-00-00-A0-3C-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-40-2E-72-65-6C-6F-63-00-00-C6-63-03-00-00-C0-42-00-00-70-03-00-00-F0-3E-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-42-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00";
	const String headerGEPTSPwin2k = "5F-5F-7F-D8-1B-3E-11-8B-1B-3E-11-8B-1B-3E-11-8B-8C-FA-6F-8B-1F-3E-11-8B-3C-F8-6C-8B-2C-3E-11-8B-3C-F8-7C-8B-AA-3E-11-8B-1E-32-4C-8B-19-3E-11-8B-C1-1D-0D-8B-1A-3E-11-8B-3C-F8-6A-8B-19-3E-11-8B-D8-31-4E-8B-18-3E-11-8B-D8-31-71-8B-19-3E-11-8B-D8-31-4C-8B-06-3E-11-8B-1B-3E-10-8B-F4-3E-11-8B-3C-F8-7F-8B-A7-3C-11-8B-3C-F8-6B-8B-1A-3E-11-8B-3C-F8-6D-8B-1A-3E-11-8B-1B-3E-11-8B-1E-3E-11-8B-3C-F8-69-8B-1A-3E-11-8B-52-69-63-68-1B-3E-11-8B-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-50-45-00-00-4C-01-05-00-9C-77-6E-46-00-00-00-00-00-00-00-00-E0-00-02-01-0B-01-08-00-00-90-30-00-00-C0-11-00-00-00-00-00-1C-A5-2B-00-00-10-00-00-00-A0-30-00-00-00-40-00-00-10-00-00-00-10-00-00-04-00-00-00-00-00-00-00-04-00-00-00-00-00-00-00-00-30-46-00-00-10-00-00-A2-DA-42-00-02-00-00-00-00-00-10-00-00-10-00-00-00-00-10-00-00-10-00-00-00-00-00-00-10-00-00-00-40-AE-3B-00-55-02-00-00-FC-96-3B-00-68-01-00-00-00-70-40-00-10-46-02-00-00-00-00-00-00-00-00-00-00-60-42-00-20-15-00-00-00-C0-42-00-EC-56-03-00-90-C4-30-00-1C-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-A0-30-00-04-04-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-2E-74-65-78-74-00-00-00-BA-80-30-00-00-10-00-00-00-90-30-00-00-10-00-00-00-00-00-00-00-00-00-00-00-00-00-00-20-00-00-60-2E-72-64-61-74-61-00-00-95-10-0B-00-00-A0-30-00-00-20-0B-00-00-A0-30-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-40-2E-64-61-74-61-00-00-00-A8-A1-04-00-00-C0-3B-00-00-E0-00-00-00-C0-3B-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-C0-2E-72-73-72-63-00-00-00-10-46-02-00-00-70-40-00-00-50-02-00-00-A0-3C-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-40-2E-72-65-6C-6F-63-00-00-1A-63-03-00-00-C0-42-00-00-70-03-00-00-F0-3E-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-42-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00";
	const String headerFRNL = "41-45-5A-78-05-24-34-2B-05-24-34-2B-05-24-34-2B-92-E0-4A-2B-01-24-34-2B-22-E2-49-2B-32-24-34-2B-22-E2-59-2B-B4-24-34-2B-00-28-69-2B-07-24-34-2B-DF-07-28-2B-04-24-34-2B-22-E2-4F-2B-07-24-34-2B-C6-2B-6B-2B-06-24-34-2B-C6-2B-54-2B-07-24-34-2B-C6-2B-69-2B-1A-24-34-2B-05-24-35-2B-F5-24-34-2B-22-E2-5A-2B-B9-26-34-2B-22-E2-4E-2B-04-24-34-2B-22-E2-48-2B-04-24-34-2B-05-24-34-2B-00-24-34-2B-22-E2-4C-2B-04-24-34-2B-52-69-63-68-05-24-34-2B-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-50-45-00-00-4C-01-05-00-8A-77-6E-46-00-00-00-00-00-00-00-00-E0-00-02-01-0B-01-08-00-00-90-30-00-00-C0-11-00-00-00-00-00-4C-AD-2B-00-00-10-00-00-00-A0-30-00-00-00-40-00-00-10-00-00-00-10-00-00-04-00-00-00-00-00-00-00-04-00-00-00-00-00-00-00-00-30-46-00-00-10-00-00-D6-09-43-00-02-00-00-00-00-00-10-00-00-10-00-00-00-00-10-00-00-10-00-00-00-00-00-00-10-00-00-00-B0-AE-3B-00-4F-02-00-00-44-97-3B-00-7C-01-00-00-00-70-40-00-10-46-02-00-00-00-00-00-00-00-00-00-00-60-42-00-20-16-00-00-00-C0-42-00-78-57-03-00-A0-C4-30-00-1C-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-A0-30-00-0C-04-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-2E-74-65-78-74-00-00-00-FA-88-30-00-00-10-00-00-00-90-30-00-00-10-00-00-00-00-00-00-00-00-00-00-00-00-00-00-20-00-00-60-2E-72-64-61-74-61-00-00-FF-10-0B-00-00-A0-30-00-00-20-0B-00-00-A0-30-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-40-2E-64-61-74-61-00-00-00-A8-A1-04-00-00-C0-3B-00-00-E0-00-00-00-C0-3B-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-C0-2E-72-73-72-63-00-00-00-10-46-02-00-00-70-40-00-00-50-02-00-00-A0-3C-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-40-2E-72-65-6C-6F-63-00-00-B2-63-03-00-00-C0-42-00-00-70-03-00-00-F0-3E-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-42-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00";
	const String headerFRNLwin2k = "5F-5F-7F-D8-1B-3E-11-8B-1B-3E-11-8B-1B-3E-11-8B-8C-FA-6F-8B-1F-3E-11-8B-3C-F8-6C-8B-2C-3E-11-8B-3C-F8-7C-8B-AA-3E-11-8B-1E-32-4C-8B-19-3E-11-8B-C1-1D-0D-8B-1A-3E-11-8B-3C-F8-6A-8B-19-3E-11-8B-D8-31-4E-8B-18-3E-11-8B-D8-31-71-8B-19-3E-11-8B-D8-31-4C-8B-06-3E-11-8B-1B-3E-10-8B-F4-3E-11-8B-3C-F8-7F-8B-A7-3C-11-8B-3C-F8-6B-8B-1A-3E-11-8B-3C-F8-6D-8B-1A-3E-11-8B-1B-3E-11-8B-1E-3E-11-8B-3C-F8-69-8B-1A-3E-11-8B-52-69-63-68-1B-3E-11-8B-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-50-45-00-00-4C-01-05-00-9C-77-6E-46-00-00-00-00-00-00-00-00-E0-00-02-01-0B-01-08-00-00-90-30-00-00-C0-11-00-00-00-00-00-1C-A5-2B-00-00-10-00-00-00-A0-30-00-00-00-40-00-00-10-00-00-00-10-00-00-04-00-00-00-00-00-00-00-04-00-00-00-00-00-00-00-00-30-46-00-00-10-00-00-D2-17-43-00-02-00-00-00-00-00-10-00-00-10-00-00-00-00-10-00-00-10-00-00-00-00-00-00-10-00-00-00-40-AE-3B-00-55-02-00-00-FC-96-3B-00-68-01-00-00-00-70-40-00-10-46-02-00-00-00-00-00-00-00-00-00-00-60-42-00-20-16-00-00-00-C0-42-00-EC-56-03-00-90-C4-30-00-1C-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-A0-30-00-04-04-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-2E-74-65-78-74-00-00-00-BA-80-30-00-00-10-00-00-00-90-30-00-00-10-00-00-00-00-00-00-00-00-00-00-00-00-00-00-20-00-00-60-2E-72-64-61-74-61-00-00-95-10-0B-00-00-A0-30-00-00-20-0B-00-00-A0-30-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-40-2E-64-61-74-61-00-00-00-A8-A1-04-00-00-C0-3B-00-00-E0-00-00-00-C0-3B-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-C0-2E-72-73-72-63-00-00-00-10-46-02-00-00-70-40-00-00-50-02-00-00-A0-3C-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-40-2E-72-65-6C-6F-63-00-00-1A-63-03-00-00-C0-42-00-00-70-03-00-00-F0-3E-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-42-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00";
	const String headerAP = "32-4B-40-97-76-2A-2E-C4-76-2A-2E-C4-76-2A-2E-C4-E1-EE-50-C4-72-2A-2E-C4-51-EC-53-C4-41-2A-2E-C4-51-EC-43-C4-C7-2A-2E-C4-73-26-73-C4-74-2A-2E-C4-AC-09-32-C4-77-2A-2E-C4-B5-25-71-C4-75-2A-2E-C4-B5-25-4E-C4-74-2A-2E-C4-B5-25-73-C4-7E-2A-2E-C4-51-EC-55-C4-6F-2A-2E-C4-76-2A-2F-C4-86-2A-2E-C4-51-EC-40-C4-CB-28-2E-C4-51-EC-54-C4-77-2A-2E-C4-51-EC-52-C4-77-2A-2E-C4-76-2A-2E-C4-73-2A-2E-C4-51-EC-56-C4-77-2A-2E-C4-52-69-63-68-76-2A-2E-C4-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-50-45-00-00-4C-01-05-00-84-69-65-46-00-00-00-00-00-00-00-00-E0-00-02-01-0B-01-08-00-00-70-30-00-00-B0-11-00-00-00-00-00-7C-83-2B-00-00-10-00-00-00-80-30-00-00-00-40-00-00-10-00-00-00-10-00-00-04-00-00-00-00-00-00-00-04-00-00-00-00-00-00-00-00-F0-45-00-00-10-00-00-54-22-43-00-02-00-00-00-00-00-10-00-00-10-00-00-00-00-10-00-00-10-00-00-00-00-00-00-10-00-00-00-60-7F-3B-00-4F-02-00-00-FC-67-3B-00-7C-01-00-00-00-30-40-00-78-4B-02-00-00-00-00-00-00-00-00-00-00-30-42-00-20-16-00-00-00-80-42-00-F8-55-03-00-A0-A4-30-00-1C-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-80-30-00-0C-04-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-2E-74-65-78-74-00-00-00-BA-62-30-00-00-10-00-00-00-70-30-00-00-10-00-00-00-00-00-00-00-00-00-00-00-00-00-00-20-00-00-60-2E-72-64-61-74-61-00-00-AF-01-0B-00-00-80-30-00-00-10-0B-00-00-80-30-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-40-2E-64-61-74-61-00-00-00-48-9D-04-00-00-90-3B-00-00-E0-00-00-00-90-3B-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-C0-2E-72-73-72-63-00-00-00-78-4B-02-00-00-30-40-00-00-50-02-00-00-70-3C-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-40-2E-72-65-6C-6F-63-00-00-FC-61-03-00-00-80-42-00-00-70-03-00-00-C0-3E-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-42-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00";
	const String headerAPwin2k = "71-39-0C-AD-35-58-62-FE-35-58-62-FE-35-58-62-FE-A2-9C-1C-FE-31-58-62-FE-12-9E-1F-FE-02-58-62-FE-12-9E-0F-FE-84-58-62-FE-30-54-3F-FE-37-58-62-FE-EF-7B-7E-FE-34-58-62-FE-F6-57-3D-FE-36-58-62-FE-F6-57-3F-FE-33-58-62-FE-F6-57-02-FE-37-58-62-FE-12-9E-19-FE-2C-58-62-FE-35-58-63-FE-DA-58-62-FE-12-9E-0C-FE-88-5A-62-FE-12-9E-18-FE-34-58-62-FE-12-9E-1E-FE-34-58-62-FE-35-58-62-FE-30-58-62-FE-12-9E-1A-FE-34-58-62-FE-52-69-63-68-35-58-62-FE-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-50-45-00-00-4C-01-05-00-D6-56-65-46-00-00-00-00-00-00-00-00-E0-00-02-01-0B-01-08-00-00-60-30-00-00-B0-11-00-00-00-00-00-4C-7B-2B-00-00-10-00-00-00-70-30-00-00-00-40-00-00-10-00-00-00-10-00-00-04-00-00-00-00-00-00-00-04-00-00-00-00-00-00-00-00-E0-45-00-00-10-00-00-B9-0B-43-00-02-00-00-00-00-00-10-00-00-10-00-00-00-00-10-00-00-10-00-00-00-00-00-00-10-00-00-00-F0-6E-3B-00-55-02-00-00-B4-57-3B-00-68-01-00-00-00-20-40-00-60-4E-02-00-00-00-00-00-00-00-00-00-00-20-42-00-20-16-00-00-00-70-42-00-40-55-03-00-90-94-30-00-1C-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-70-30-00-04-04-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-2E-74-65-78-74-00-00-00-AA-5A-30-00-00-10-00-00-00-60-30-00-00-10-00-00-00-00-00-00-00-00-00-00-00-00-00-00-20-00-00-60-2E-72-64-61-74-61-00-00-45-01-0B-00-00-70-30-00-00-10-0B-00-00-70-30-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-40-2E-64-61-74-61-00-00-00-48-9D-04-00-00-80-3B-00-00-E0-00-00-00-80-3B-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-C0-2E-72-73-72-63-00-00-00-60-4E-02-00-00-20-40-00-00-50-02-00-00-60-3C-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-40-2E-72-65-6C-6F-63-00-00-5A-61-03-00-00-70-42-00-00-70-03-00-00-B0-3E-00-00-00-00-00-00-00-00-00-00-00-00-00-40-00-00-42-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00";

	byte[] headerBytes = new byte[656];

	using (FileStream stream = File.OpenRead(modules.First().FileName)) {
		stream.Position = 0x80;
		stream.Read(headerBytes, 0, 656);
	}

	String headerBytesString = BitConverter.ToString(headerBytes);
	
	switch (headerBytesString) {
		case headerUS:
		case headerUSwin2k:
		case headerPL:
		case headerPLwin2k:
			version = "USAPolish";
			break;
		case headerSC:
		case headerSCwin2k:
			version = "Scandinavia";
			break;
		case headerBR:
		case headerBRwin2k:
			version = "Brazilian";
			break;
		case headerFRNL:
		case headerFRNLwin2k:
		case headerGEPTSP:
		case headerGEPTSPwin2k:
			version = "DutchFrenchGermanPortugueseSpanish";
			break;
		case headerAP:
		case headerAPwin2k:
			version = "ActionPack";
			break;
		default:
			version = "";
			MessageBox.Show(
				"The game version was not recognized, make sure you're using a compatible version.",
				"LiveSplit | Ratatouille",
				MessageBoxButtons.OK,MessageBoxIcon.Error
			);
			break;
	}

	refreshRate = 160;
	// Keep last visited level stored, defaults to Menu02
	vars.prevLevel = 0;
}

isLoading
{
	if (version != "") {
		return current.load != 0.0;
	}
}

start
{
	if (version != "" && settings["auto_start"]) {
        if (settings["start_mb"]) {
            // If current level is Somewhere in France
            if (current.level == 1) {
                double deltaStartPos = Math.Abs(old.xPos) - Math.Abs(-16.57965);
                // If old xpos is virtually the start position
                if ((deltaStartPos > -0.00001) && (deltaStartPos < 0.00001)) {
                    // Return if game isn't paused and a textbox dialog was closed
                    return (!current.paused && old.menuState == 5 && old.dialogType == 7);
                }
            }
        }
        if (settings["start_pipemk"]) {
            // If current level is The slide of your life
            if (current.level == 46) {
                // If remy goes from idle to sliding animation
                if (old.playerState == 2 && current.playerState == 76) {
                    return current.xPos < -23.5 && current.xPos > -23.6;
                }
            }
        }
    }
}

split
{	
	if (version != "") {
		uint numCurrentActiveMissions = current.activeMissions >> 0xe;
		uint numOldActiveMissions = old.activeMissions >> 0xe;

		// Update last visited level if needed
		if (old.level != current.level) {
			vars.prevLevel = old.level;
		}

        if (settings["auto_split"]) {
			if (settings["split_any"]) {
				// Splitting based on level change
				// Splits if old level is not current level and is not SW, CT, KD, MK, MG_CAKE, MG_SOUP, MG_SOUP2, MG_POTA, MG_MIXER, MG_PLATE, MG_PLATE2, MG_SARBA, MG_ALARM, MG_FEN, KN, KN_CHA, a Dream World or if going from main level to chase
				if (old.level != current.level &&
					old.level != 3 &&
					old.level != 5 &&
					old.level != 7 &&
					old.level != 9 &&
					old.level != 11 &&
					old.level != 13 &&
					old.level != 14 &&
					old.level != 16 &&
					old.level != 17 &&
					old.level != 18 &&
					old.level != 19 &&
					old.level != 20 &&
					old.level != 21 &&
					old.level != 22 &&
					old.level != 23 &&
					old.level != 24 &&
					old.level != 34 &&
					old.level != 35 &&
					old.level != 36 &&
					old.level != 37 &&
					old.level != 38 &&
					old.level != 39 &&
					old.level != 40 &&
					old.level != 41 &&
					old.level != 42 &&
					old.level != 43 ||
					(old.level == 5 && current.level == 6 || old.level == 7 && current.level == 8 || old.level == 9 && current.level == 10)) {
						return true;
				}
				
				// If current level is not MB, SW, PIPE_SW, PIPE_CT, PIPE_MK, PIPE_KN
				if (current.level != 1 &&
					current.level != 3 &&
					current.level != 44 &&
					current.level != 45 &&
					current.level != 46 &&
					current.level != 47) {
					// Splits if mission complete book closes
					if (current.dialogType == 3 && old.menuState == 5 && current.menuState == 13) {
						return true;
					}
				}

				// Bone Sequence Break
				// Splits if current level is 5, holding bone and mission count goes from 10 to 9
				if (current.level == 5) {
					if (current.playerState == 50 || current.playerState == 51) {
						return numOldActiveMissions == 10 && numCurrentActiveMissions == 9;
					}
				}
				
				// Splits after a colony collection gets completed
				if (settings["split_anyCollection"]) {
					if (current.dialogType == 23 && old.menuState == 5 && current.menuState == 13) {
						return true;
					}
				}
			}
			
			if (settings["split_deaths"]) {
            	// Splits if died from water
            	if (old.playerState != 134 && current.playerState == 134) {
                	return true;
            	// Splits if died from anything else
            	} else {return old.playerState != 134 && old.playerState != 145 && current.playerState == 145;}
			}
		}
		
        if (settings["auto_end"]) {
            if (settings["end_knchase"]) {
                // Last Split, mission count goes to 1 after reaching the final cutscene trigger
                if (current.level == 24) {
                    if (numCurrentActiveMissions < numOldActiveMissions) return true;
                }
            }

			if (settings["end_amc"]) {
				if (current.level == 3) {
					return current.dialogType == 23 && old.menuState == 0 && current.menuState == 1;
				}
			}
        }
	}
}

// NiV-L-A, ThePhotoshopMaster, Sabe and SplasBoi
